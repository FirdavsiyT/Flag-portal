<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CTF Labs // {% block title %}Dashboard{% endblock %}</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@300;400;500;700&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root { --htb-green: #9fef00; --htb-dark: #13141b; --htb-panel: #1a1c23; --htb-border: #2c2f3b; }
        body { background-color: var(--htb-dark); color: #ffffff; font-family: 'Ubuntu', sans-serif; background-image: radial-gradient(rgba(44, 47, 59, 0.4) 1px, transparent 1px); background-size: 30px 30px; }
        .font-mono { font-family: 'JetBrains Mono', monospace; }
        .nav-link.active { background: linear-gradient(90deg, rgba(159, 239, 0, 0.08) 0%, transparent 100%); border-left: 3px solid var(--htb-green); color: white; }
        .nav-link.active i { color: var(--htb-green); }
        .glass-panel { background: linear-gradient(145deg, #1e2129, #16181d); border: 1px solid rgba(255, 255, 255, 0.05); }
        /* ... Остальные стили из ваших файлов ... */
    </style>
</head>
<body class="h-screen flex selection:bg-[#9fef00] selection:text-black bg-[#13141b]">
    <!-- SIDEBAR -->
    <aside class="w-64 bg-[#111219] border-r border-[#1e2129] flex flex-col">
        <div class="h-20 flex items-center px-6 border-b border-[#1e2129] font-bold text-xl"><span class="text-[#9fef00] mr-2">H</span>HACK<span class="text-white">LABS</span></div>
        <nav class="flex-1 py-8 px-4 space-y-2">
            <a href="{% url 'dashboard' %}" class="nav-link flex items-center gap-3 px-4 py-3 rounded-lg text-gray-400 hover:text-white {% if request.resolver_match.url_name == 'dashboard' %}active{% endif %}">
                <i data-lucide="layout-dashboard" class="w-5 h-5"></i> Dashboard
            </a>
            <a href="{% url 'challenges' %}" class="nav-link flex items-center gap-3 px-4 py-3 rounded-lg text-gray-400 hover:text-white {% if request.resolver_match.url_name == 'challenges' %}active{% endif %}">
                <i data-lucide="flag" class="w-5 h-5"></i> Challenges
            </a>
            <a href="{% url 'scoreboard' %}" class="nav-link flex items-center gap-3 px-4 py-3 rounded-lg text-gray-400 hover:text-white {% if request.resolver_match.url_name == 'scoreboard' %}active{% endif %}">
                <i data-lucide="trophy" class="w-5 h-5"></i> Rankings
            </a>
            <a href="{% url 'profile' %}" class="nav-link flex items-center gap-3 px-4 py-3 rounded-lg text-gray-400 hover:text-white {% if request.resolver_match.url_name == 'profile' %}active{% endif %}">
                <i data-lucide="user" class="w-5 h-5"></i> Profile
            </a>
            {% if user.is_authenticated %}
            <a href="{% url 'logout' %}" class="nav-link flex items-center gap-3 px-4 py-3 rounded-lg text-red-400 hover:text-red-300 mt-auto">
                <i data-lucide="log-out" class="w-5 h-5"></i> Logout
            </a>
            {% else %}
            <a href="{% url 'login' %}" class="nav-link flex items-center gap-3 px-4 py-3 rounded-lg text-green-400 hover:text-green-300 mt-auto">
                <i data-lucide="log-in" class="w-5 h-5"></i> Login
            </a>
            {% endif %}
        </nav>
    </aside>

    <main class="flex-1 flex flex-col bg-transparent relative w-full">
        <!-- HEADER -->
        <header class="h-20 bg-[#1a1c23]/80 border-b border-[#2c2f3b] flex justify-between items-center px-8">
            <span class="text-[#9ca3af] font-mono text-sm">root@hacklabs: ~ / <span class="text-white">{% block header_title %}dashboard{% endblock %}</span></span>
            {% if user.is_authenticated %}
            <div class="flex items-center gap-3 bg-black/40 rounded-full px-4 py-1.5 border border-[#2c2f3b]">
                <i data-lucide="target" class="w-4 h-4 text-[#9fef00]"></i>
                <span class="text-sm font-bold text-white font-mono">{{ user.score }} <span class="text-[#5a6278] text-xs font-normal">pts</span></span>
            </div>
            {% endif %}
        </header>

        <div class="flex-1 overflow-y-auto p-8 scroll-smooth">
            {% block content %}{% endblock %}
        </div>
    </main>

    <script>document.addEventListener('DOMContentLoaded', () => { lucide.createIcons(); });</script>
    {% block scripts %}{% endblock %}
</body>
</html>