{% extends 'base.html' %}

{% block header_title %}Initialize Identity{% endblock %}

{% block content %}
<div class="relative min-h-[calc(100vh-80px)] flex items-center justify-center overflow-hidden py-10">

    <!-- Animated Cyber Grid Background -->
    <div class="absolute inset-0 bg-[#050608]">
        <div class="absolute inset-0 bg-[linear-gradient(rgba(18,20,28,0.5)_2px,transparent_2px),linear-gradient(90deg,rgba(18,20,28,0.5)_2px,transparent_2px)] bg-[size:40px_40px] [mask-image:radial-gradient(ellipse_80%_80%_at_50%_50%,#000_40%,transparent_100%)]"></div>
        <div class="absolute top-0 left-0 w-full h-full bg-[radial-gradient(circle_800px_at_50%_200px,#9fef0015,transparent)]"></div>
    </div>

    <!-- Floating Particles (Pure CSS) -->
    <div class="absolute top-20 left-10 w-2 h-2 bg-[#9fef00] rounded-full blur-[2px] animate-ping"></div>
    <div class="absolute bottom-40 right-20 w-1 h-1 bg-blue-500 rounded-full blur-[1px] animate-pulse"></div>

    <!-- Main Card Container -->
    <div class="relative w-full max-w-md z-10 mx-4">

        <!-- Decorative HUD Elements -->
        <div class="absolute -top-12 -left-12 w-24 h-24 border-t-2 border-l-2 border-[#9fef00]/30 rounded-tl-3xl"></div>
        <div class="absolute -bottom-12 -right-12 w-24 h-24 border-b-2 border-r-2 border-[#9fef00]/30 rounded-br-3xl"></div>

        <!-- Glass Card -->
        <div class="backdrop-blur-xl bg-[#0d0e12]/60 border border-[#2c2f3b] rounded-2xl shadow-[0_0_50px_rgba(0,0,0,0.5)] overflow-hidden">

            <!-- Header Section -->
            <div class="px-8 pt-8 pb-6 text-center border-b border-[#2c2f3b] bg-[#15171e]/50">
                <div class="inline-flex items-center justify-center w-16 h-16 rounded-full bg-[#9fef00]/10 border border-[#9fef00]/20 mb-4 shadow-[0_0_15px_rgba(159,239,0,0.2)]">
                    <i data-lucide="cpu" class="w-8 h-8 text-[#9fef00]"></i>
                </div>
                <h1 class="text-2xl font-bold text-white tracking-tight">Initiate Sequence</h1>
                <p class="text-[#5a6278] text-sm mt-2">Create new operator profile</p>
            </div>

            <!-- Form Section -->
            <div class="p-8">
                <form method="post" class="space-y-5">
                    {% csrf_token %}

                    {% if form.non_field_errors %}
                        <div class="bg-red-500/10 border border-red-500/20 text-red-400 p-3 rounded text-xs">
                            {% for error in form.non_field_errors %}
                                <p>{{ error }}</p>
                            {% endfor %}
                        </div>
                    {% endif %}

                    {% for field in form %}
                    <div class="space-y-1.5 group">
                        <label class="block text-[10px] uppercase tracking-widest font-mono text-[#5a6278] group-focus-within:text-[#9fef00] transition-colors">
                            {{ field.label }}
                            {% if field.field.required %}<span class="text-[#9fef00]">*</span>{% endif %}
                        </label>
                        <div class="relative group/input">
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none transition-colors">
                                {% if 'username' in field.name %}
                                    <i data-lucide="user" class="h-4 w-4 text-[#5a6278] group-focus-within/input:text-[#9fef00]"></i>
                                {% elif 'email' in field.name %}
                                    <i data-lucide="at-sign" class="h-4 w-4 text-[#5a6278] group-focus-within/input:text-[#9fef00]"></i>
                                {% elif 'password' in field.name %}
                                    <i data-lucide="shield" class="h-4 w-4 text-[#5a6278] group-focus-within/input:text-[#9fef00]"></i>
                                {% else %}
                                    <i data-lucide="type" class="h-4 w-4 text-[#5a6278] group-focus-within/input:text-[#9fef00]"></i>
                                {% endif %}
                            </div>

                            <!-- Input Wrapper -->
                            <div class="register-input-wrapper">
                                {{ field }}
                            </div>

                            <!-- Focus Border Animation -->
                            <div class="absolute bottom-0 left-0 h-[1px] w-0 bg-[#9fef00] transition-all duration-300 group-focus-within/input:w-full"></div>
                        </div>
                        {% if field.errors %}
                            <p class="text-red-400 text-xs mt-1 font-mono">> {{ field.errors.0 }}</p>
                        {% endif %}
                        {% if field.help_text %}
                            <p class="text-[#5a6278] text-[10px] mt-0.5 opacity-60">{{ field.help_text|striptags }}</p>
                        {% endif %}
                    </div>
                    {% endfor %}

                    <div class="pt-4">
                        <button type="submit"
                            class="relative w-full overflow-hidden bg-[#9fef00] hover:bg-[#b0ff1a] text-black font-bold py-3.5 px-4 rounded-lg transition-all transform hover:-translate-y-0.5 active:translate-y-0 shadow-[0_4px_14px_0_rgba(159,239,0,0.39)] group">
                            <span class="relative z-10 flex items-center justify-center gap-2">
                                CONFIRM IDENTITY
                                <i data-lucide="arrow-right" class="w-4 h-4 transition-transform group-hover:translate-x-1"></i>
                            </span>
                            <!-- Button Shine Effect -->
                            <div class="absolute top-0 -left-[100%] w-full h-full bg-gradient-to-r from-transparent via-white/20 to-transparent skew-x-[25deg] transition-all duration-1000 group-hover:left-[100%]"></div>
                        </button>
                    </div>
                </form>

                <div class="mt-6 pt-6 border-t border-[#2c2f3b] text-center">
                    <p class="text-[#5a6278] text-xs font-mono">
                        ALREADY AUTHORIZED?
                        <a href="{% url 'login' %}" class="text-[#9fef00] hover:text-white transition-colors ml-1 border-b border-transparent hover:border-[#9fef00]">
                            ACCESS TERMINAL
                        </a>
                    </p>
                </div>
            </div>

            <!-- Bottom Status Bar -->
            <div class="bg-[#050608]/80 px-4 py-2 flex justify-between items-center text-[10px] font-mono text-[#5a6278] border-t border-[#2c2f3b]">
                <span class="flex items-center gap-1.5">
                    <span class="w-1.5 h-1.5 rounded-full bg-green-500 animate-pulse"></span>
                    SYSTEM: ONLINE
                </span>
                <span>SECURE: TLS 1.3</span>
            </div>
        </div>
    </div>
</div>

<style>
    .register-input-wrapper input {
        width: 100%;
        background-color: rgba(21, 23, 30, 0.4);
        border: 1px solid #2c2f3b;
        color: white;
        font-family: 'JetBrains Mono', monospace; /* Моноширинный шрифт для ощущения кода */
        font-size: 0.875rem;
        border-radius: 0.5rem;
        padding: 0.75rem 0.75rem 0.75rem 2.5rem;
        transition: all 0.2s;
    }
    .register-input-wrapper input:focus {
        outline: none;
        background-color: rgba(21, 23, 30, 0.8);
        border-color: #9fef00;
        box-shadow: 0 0 15px rgba(159, 239, 0, 0.1);
    }
    .register-input-wrapper input::placeholder {
        color: #4b5563;
        font-family: sans-serif; /* Placeholder обычным шрифтом */
    }
</style>
{% endblock %}